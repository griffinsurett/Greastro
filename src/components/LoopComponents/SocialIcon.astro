---
// src/components/LoopComponents/SocialIcon.astro
import { Icon } from 'astro-icon/components';
import { getIconName } from '@/utils/iconLoader';

export interface Props {
  title: string;
  link?: string;
  icon?: string;
  size?: 'sm' | 'md' | 'lg';
}

const { title, link, icon, size = 'md' } = Astro.props;

// Use getIconName to handle icons with or without prefixes
// Default to lucide:globe if no icon provided
const iconName = icon ? getIconName(icon) : 'lucide:globe';

const sizeClasses = {
  sm: 'w-8 h-8',
  md: 'w-10 h-10',
  lg: 'w-12 h-12'
};

const iconSizeClasses = {
  sm: 'w-4 h-4',
  md: 'w-5 h-5',
  lg: 'w-6 h-6'
};
---

{link ? (
  <a 
    href={link}
    target="_blank"
    rel="noopener noreferrer"
    class={`${sizeClasses[size]} bg-gray-100 hover:bg-blue-100 rounded-full flex items-center justify-center transition-all duration-200 hover:scale-110`}
    aria-label={`Visit our ${title} page`}
    title={title}
  >
    <Icon name={iconName} class={`${iconSizeClasses[size]} text-gray-700`} />
  </a>
) : (
  <div 
    class={`${sizeClasses[size]} bg-gray-100 rounded-full flex items-center justify-center`}
    title={title}
  >
    <Icon name={iconName} class={`${iconSizeClasses[size]} text-gray-700`} />
  </div>
)}