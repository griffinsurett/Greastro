---
// src/components/docs/Sidebar.astro
/**
 * Documentation Sidebar Navigation
 * Fixed sidebar with collapsible sections
 */

export interface Props {
  sections?: {
    title: string;
    items: {
      label: string;
      href: string;
      active?: boolean;
    }[];
  }[];
}

const { sections = [] } = Astro.props;

// Default sections if none provided
const defaultSections = [
  {
    title: 'Getting Started',
    items: [
      { label: 'Overview', href: '#overview' },
      { label: 'Installation', href: '#installation' },
    ]
  },
  {
    title: 'Basic Queries',
    items: [
      { label: 'Simple Queries', href: '#basic-queries' },
      { label: 'Filtering', href: '#filtering' },
      { label: 'Sorting', href: '#sorting' },
      { label: 'Pagination', href: '#pagination' },
    ]
  },
  {
    title: 'Advanced Features',
    items: [
      { label: 'Multi-Collection', href: '#multi-collection' },
      { label: 'Hierarchical Queries', href: '#hierarchical' },
      { label: 'Relations', href: '#relations' },
      { label: 'Statistics', href: '#statistics' },
    ]
  },
  {
    title: 'Reference',
    items: [
      { label: 'API Reference', href: '#api-reference' },
      { label: 'Best Practices', href: '#best-practices' },
    ]
  },
];

const navSections = sections.length > 0 ? sections : defaultSections;
---

<aside class="docs-sidebar">
  <div class="p-6 pb-32">
    <!-- Logo/Brand -->
    <a href="/" class="flex items-center gap-3 mb-10 group">
      <div class="w-10 h-10 bg-gradient-to-br from-docs-accent to-docs-purple rounded-xl group-hover:scale-105 transition-transform"></div>
      <span class="font-bold text-xl text-docs-text">Query Docs</span>
    </a>

    <!-- Navigation Sections -->
    <nav class="space-y-8">
      {navSections.map(section => (
        <div>
          <h3 class="text-xs font-bold uppercase tracking-wider mb-4 px-3 text-docs-text-light">
            {section.title}
          </h3>
          <ul class="space-y-1">
            {section.items.map(item => (
              <li>
                <a 
                  href={item.href}
                  class={`block px-4 py-3 text-sm rounded-lg transition-all font-medium relative text-docs-text-muted hover:text-docs-accent hover:bg-docs-accent/10 ${
                    item.active ? 'bg-docs-accent/10 text-docs-accent' : ''
                  }`}
                >
                  {item.label}
                </a>
              </li>
            ))}
          </ul>
        </div>
      ))}
    </nav>
  </div>
</aside>