---
// src/layouts/collections/BlogLayout.astro
/**
 * Blog Layout - Specialized Layout for Blog Posts
 * 
 * Alternative layout optimized for blog content.
 * Simpler than CollectionLayout with:
 * - Featured image above content
 * - Traditional blog post structure
 * - Author info at top
 * 
 * Specify in _meta.mdx with: itemsLayout: "BlogLayout"
 */

import BaseLayout from '@/layouts/BaseLayout.astro';
import { getAuthorName, getImageSrc } from './helpers/layoutHelpers';
import type { CollectionLayoutProps } from './types';

const { 
  entry,
  collection,
  collectionMeta,
  Content,
  isIndexPage,
  seoProps = {},
  ...extraProps
} = Astro.props as CollectionLayoutProps;

const data = entry?.data || {};
const featuredImageSrc = getImageSrc(data.featuredImage);
---
<BaseLayout {...seoProps}>
  <main class="container mx-auto px-4 py-8">
    <article class="max-w-4xl mx-auto">
      {/* Featured image */}
      {featuredImageSrc && (
        <div class="mb-8 rounded-xl overflow-hidden">
          <img 
            src={featuredImageSrc} 
            alt={data.featuredImage?.alt || data.title}
            class="w-full h-64 md:h-96 object-cover"
          />
        </div>
      )}
      
      {/* Article header */}
      <header class="mb-8">
        <h1 class="text-4xl md:text-5xl font-bold mb-4">{data.title}</h1>
        
        {data.description && (
          <p class="text-xl text-gray-600">{data.description}</p>
        )}
        
        {/* Metadata */}
        <div class="flex flex-wrap gap-4 mt-4 text-sm text-gray-500">
          {data.publishDate && (
            <time datetime={new Date(data.publishDate).toISOString()}>
              {new Date(data.publishDate).toLocaleDateString()}
            </time>
          )}
          {data.author && (
            <span>By {getAuthorName(data.author)}</span>
          )}
          {data.readingTime && (
            <span>{data.readingTime} min read</span>
          )}
        </div>
      </header>
      
      {/* Article content */}
      {Content && (
        <div class="prose prose-lg max-w-none">
          <Content />
        </div>
      )}
    </article>
  </main>
</BaseLayout>