---
// src/pages/[collection]/[slug].astro
/**
 * Collection-Level Item Pages
 * 
 * Generates pages for items at /collection/slug path.
 * Items with rootPath: true use /[slug].astro instead.
 */

import {
  generateItemPaths,
  prepareItemPageData,
  collectionLevelFilter,
  buildCollectionLevelParams,
} from "@/utils/pageGeneration/itemPageHelpers";

export async function getStaticPaths() {
  return generateItemPaths(collectionLevelFilter, buildCollectionLevelParams);
}

const {
  LayoutComponent,
  Content,
  entry,
  collectionName,
  collectionMeta,
  seoProps,
} = await prepareItemPageData(Astro.props);
---
<LayoutComponent
  entry={entry}
  collection={collectionName}
  collectionMeta={collectionMeta}
  seoProps={seoProps}
  Content={Content}
  {...collectionMeta}  
/>